## 页框

将内存分为一个个大小相等的分区，每个分区就是一个 **页框**（也叫 **页帧** 、 **内存块**、 **物理块**）。

每个页框有一个编号，即 **页框号** ，从0开始。

![image-20210426145924545](https://img.jooks.cn/img/20210426145924.png)

## 页

将用户进程的地址空间分为与 **页框大小相等** 的一个个区域，称为 **页** 或 **页面** 。

每个页面有一个编号，即 **页号** ，也是从0开始。

因为进程的最后一个页面可能没有一个页框那么大。因此，页框不能太大，否则可能产生过大的内存碎片。

操作系统的每个页面都会被放入一个页框中，即页面与页框是一一对应的。

## 地址转换

物理地址 = 页面始址 + 页内偏移量

![image-20210426151131319](https://img.jooks.cn/img/20210426151131.png)

为了方便计算页号、页内偏移量，**页面大小** 一般都要为 **2的整数幂** 。

## 页表

由页号和页框号组成

![image-20210426152236718](https://img.jooks.cn/img/20210426152236.png)

一个进程对应一张页表，进程每一页对应一个页表项，页表项按顺序连续地放在内存中。

每个页表项的长度是相同的，页号是隐式的（可以通过计算得出）

通常会在系统中设置一个 **页表寄存器**（PTR），存放页表在内存中的 **起始地址F** 和 **页表长度M**。

进程未执行时，**页表的始址** 和 **页表长度** 放在PCB中，当进程被调度时，操作系统内核会把它们放到页表寄存器中。

## 局部性原理

时间局部性：某个指令或数据被使用或访问过之后，很可能在一段时间内会再次访问。

空间局部性：一旦某个程序访问了某个存储单元，在不久之后，附近的存储单元也可能会被访问。

## 快表（TLB）

快表，又称联想寄存器，是一种访问速度比内存快很多的高速缓冲存储器，用来存放当前访问的若干页表项。

快表是一种单独的寄存器。

内存中的页表也被称为慢表。

工作机制类似于mysql的buffer pool，对在页表中查到的页表项在快表中做一个缓存，

## 两级页表

单级页表是连续的，因此当页表过大时，会存在一个页表存储时，占用多个页框的情况，造成页内碎片、以及内存利用率低。因此对页表进行拆分，使之平均分组，使得一个分组恰好放入一个页框中。

这样的设计需要增加页目录表来对各个分页表进行管理，也就形成了两级页表。

![image-20210427121253319](https://img.jooks.cn/img/20210427121253.png)

多级页表中，各级页表的大小不能超过一个页面，可以分更多级。

























